(function(){"use strict";var e={203:function(e,n,o){var t=o(9242),r=o(3396),a=o(4870);const i=e=>((0,r.dD)("data-v-46fddc5c"),e=e(),(0,r.Cn)(),e),l=["onSubmit"],s={for:"form-json",class:"form-json__label"},u=i((()=>(0,r._)("button",{type:"submit",class:"form-json__button"},"Сгенерировать форму",-1)));var c=(0,r.aZ)({__name:"FormJsonEditor",emits:["submit"],setup(e,{emit:n}){(0,r.aZ)({name:"FormJsonEditor"});const o=(0,a.iH)("");function i(){n("submit",o.value)}return(e,n)=>((0,r.wg)(),(0,r.iD)("form",{class:"form-json",onSubmit:(0,t.iM)(i,["prevent"])},[(0,r._)("label",s,[(0,r.Uk)("Введите JSON-представление формы: "),(0,r.wy)((0,r._)("textarea",{id:"form-json",class:"form-json__textarea",cols:"30",rows:"10","onUpdate:modelValue":n[0]||(n[0]=e=>o.value=e)},null,512),[[t.nr,o.value]])]),u],40,l))}}),d=o(89);const f=(0,d.Z)(c,[["__scopeId","data-v-46fddc5c"]]);var m,p=f,_=(o(7658),o(7139));(function(e){e["Container"]="container",e["Input"]="input",e["Datepicker"]="datepicker",e["List"]="list"})(m||(m={}));const v={type:m.Container,code:"k1",listdata:[],value:null,children:[]};function y(e){return JSON.parse(JSON.stringify(e))}const b={class:"form-tree__item-wrapper"},g=["for"],w=["id","value"],h=["for"],k=["id","value"],O=["for"],J=["id"],S={key:3,class:"form-tree__item-label"},D={key:4,class:"form-tree__item form-tree__item--container"};var F=(0,r.aZ)({__name:"FormNodeTree",props:{node:Object},setup(e){(0,r.aZ)({name:"FormNodeTree"});const{updateFormTreeModel:n}=(0,r.f3)("formTreeModel");function o(e){const o=e.target,{id:t,value:r}=o;r&&n(t,r)}return(n,t)=>{const i=(0,r.up)("FormNodeTree",!0);return(0,r.wg)(),(0,r.iD)("div",b,[e.node?.type===(0,a.SU)(m).Input?((0,r.wg)(),(0,r.iD)("label",{key:0,for:e.node.code,class:"form-tree__item-label"},[(0,r.Uk)((0,_.zw)(e.node.code)+" ",1),(0,r._)("input",{class:"form-tree__item form-tree__item--input",id:e.node.code,type:"text",value:e.node.value,onInput:o},null,40,w)],8,g)):(0,r.kq)("",!0),e.node?.type===(0,a.SU)(m).Datepicker?((0,r.wg)(),(0,r.iD)("label",{key:1,for:e.node.code,class:"form-tree__item-label"},[(0,r.Uk)((0,_.zw)(e.node.code)+" ",1),(0,r._)("input",{class:"form-tree__item form-tree__item--datepicker",id:e.node.code,type:"date",value:e.node.value,onInput:o},null,40,k)],8,h)):(0,r.kq)("",!0),e.node?.type===(0,a.SU)(m).List?((0,r.wg)(),(0,r.iD)("label",{key:2,for:e.node.code,class:"form-tree__item-label"},[(0,r.Uk)((0,_.zw)(e.node.code)+" ",1),(0,r._)("select",{id:e.node.code,class:"form-tree__item form-tree__item--list",onChange:o},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.node.listdata,(e=>((0,r.wg)(),(0,r.iD)("option",{key:e.key},(0,_.zw)(e.value),1)))),128))],40,J)],8,O)):e.node?.type===(0,a.SU)(m).Container?((0,r.wg)(),(0,r.iD)("span",S,(0,_.zw)(e.node?.code),1)):(0,r.kq)("",!0),e.node?.children&&e.node?.children.length?((0,r.wg)(),(0,r.iD)("div",D,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.node?.children,(e=>((0,r.wg)(),(0,r.j4)(i,{node:e,key:e.code},null,8,["node"])))),128))])):(0,r.kq)("",!0)])}}});const j=F;var N=j;const M={class:"form-tree"};var T=(0,r.aZ)({__name:"FormTree",props:{node:Object},setup(e){return(0,r.aZ)({name:"FormTree"}),(n,o)=>((0,r.wg)(),(0,r.iD)("div",M,[(0,r.Wm)(N,{node:e.node},null,8,["node"])]))}});const Z=T;var C=Z;const U={class:"modal"},x={class:"modal__content"};var H=(0,r.aZ)({__name:"ModalJsonForm",props:{formJson:{required:!0,type:String},isOpened:{required:!0,type:Boolean}},emits:["closeModal"],setup(e,{emit:n}){const o=e;function i(e,n){const o=y(n);return e.forEach((n=>{if(null!==n.parent&&n.parent===o.code){const t={type:n.type,code:n.code,listdata:n.listdata,value:n.value,children:[]};n.type===m.Container?o.children.push(i(e,t)):o.children.push(t)}})),o}(0,r.aZ)({name:"ModalJsonForm"});const l=(0,r.Fl)((()=>{if(!o.formJson)return y(v);const e=JSON.parse(o.formJson),n=e.find((e=>null===e.parent));return n?i(e,y(v)):y(v)})),s=(0,r.Fl)((()=>{if(!o.formJson)return{};const e=JSON.parse(o.formJson),n={};return e.forEach((e=>{n[e.code]=e.value})),n})),u=(0,a.iH)({});(0,r.YP)(s,(e=>{u.value=e}));const c=(e,n)=>{const o=JSON.parse(JSON.stringify(u.value));o[e]=n,u.value=o};function d(){n("closeModal"),alert(JSON.stringify(u.value))}return(0,r.JJ)("formTreeModel",{formTreeModel:u,updateFormTreeModel:c}),(n,o)=>(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",U,[(0,r._)("div",x,[(0,r._)("span",{class:"modal__close",onClick:d,onKeyup:d},"×",32),(0,r.Wm)(C,{node:l.value},null,8,["node"])])],512)),[[t.F8,e.isOpened]])}});const q=(0,d.Z)(H,[["__scopeId","data-v-9e1bad62"]]);var E=q,I=(0,r.aZ)({__name:"App",setup(e){(0,r.aZ)({name:"App",components:{FormJsonEditor:p}});const n=(0,a.iH)(""),o=(0,a.iH)(!1);function t(){o.value=!0}function i(){o.value=!1}function l(e){try{JSON.parse(e)}catch(n){return!1}return!0}function s(e){e.trim()&&(l(e)?(n.value=e,t()):alert("Невалидный JSON"))}return(e,t)=>((0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(p,{onSubmit:s}),(0,r.Wm)(E,{formJson:n.value,isOpened:o.value,onCloseModal:i},null,8,["formJson","isOpened"])],64))}});const z=I;var W=z;(0,t.ri)(W).mount("#app")}},n={};function o(t){var r=n[t];if(void 0!==r)return r.exports;var a=n[t]={exports:{}};return e[t].call(a.exports,a,a.exports,o),a.exports}o.m=e,function(){var e=[];o.O=function(n,t,r,a){if(!t){var i=1/0;for(c=0;c<e.length;c++){t=e[c][0],r=e[c][1],a=e[c][2];for(var l=!0,s=0;s<t.length;s++)(!1&a||i>=a)&&Object.keys(o.O).every((function(e){return o.O[e](t[s])}))?t.splice(s--,1):(l=!1,a<i&&(i=a));if(l){e.splice(c--,1);var u=r();void 0!==u&&(n=u)}}return n}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[t,r,a]}}(),function(){o.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(n,{a:n}),n}}(),function(){o.d=function(e,n){for(var t in n)o.o(n,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){var e={143:0};o.O.j=function(n){return 0===e[n]};var n=function(n,t){var r,a,i=t[0],l=t[1],s=t[2],u=0;if(i.some((function(n){return 0!==e[n]}))){for(r in l)o.o(l,r)&&(o.m[r]=l[r]);if(s)var c=s(o)}for(n&&n(t);u<i.length;u++)a=i[u],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(c)},t=self["webpackChunktest_vue3_form_generator"]=self["webpackChunktest_vue3_form_generator"]||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))}();var t=o.O(void 0,[998],(function(){return o(203)}));t=o.O(t)})();
//# sourceMappingURL=app.080b51c2.js.map